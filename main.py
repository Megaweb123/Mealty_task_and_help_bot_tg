import telebot
import schedule
import time
import threading
from datetime import datetime
from data import token, CHAT_ID

bot = telebot.TeleBot(token)

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
def send_message(text):
    try:
        print(f"{datetime.now()} –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç —Å ID: {CHAT_ID}\n–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è: {text}")
        bot.send_message(CHAT_ID, text)
    except Exception as e:
        print(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –±—É–¥–Ω–∏–π –¥–µ–Ω—å: {e}')

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
def run_scheduler():
    while True:
        schedule.run_pending()
        time.sleep(1)



@bot.message_handler(commands=['start'])
def start_message(message):
    bot.send_message(message.chat.id, "–ü—Ä–∏–≤–µ—Ç, –ö–≤–∞–¥—Ä–æ–±–µ—Ä—ã!!! –Ø –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å –≤–∞–º, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å! üòÅ")


# –°–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
messages = [
    "–í—Å–µ–º –¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –í—ã–ø–æ–ª–Ω—è–µ–º –ø–ª–∞–Ω—ã, –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –±–∞–±–æ—Å–∏–∫–∏ c:",
    "–ö–æ–ª–ª–µ–≥–∏, –≤–Ω–æ—Å–∏–º —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–æ–≤ –∑–∞ —É—Ç—Ä–æ –≤ –ª–∫!",
    "–ö–æ–ª–ª–µ–≥–∏, –≤–Ω–æ—Å–∏–º —Ñ–æ—Ç–æ–æ—Ç—á—ë—Ç!",
    "–ö–æ–ª–ª–µ–≥–∏, –Ω–∞–ø–æ–Ω–∏–º–∞–Ω–∞—é –ø—Ä–æ –æ—Ç—á–µ—Ç!\n–ù–∞–ø–∏—Ç–∫–∏ –ø–ª–∞–Ω/—Ñ–∞–∫—Ç,\n–ø—Ä–µ–º–∏—É–º (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥–∞–Ω–Ω—ã—Ö),\n—Ç—Ä–∏ —à–æ–∫–æ–ª–∞–¥–∞ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥–∞–Ω–Ω—ã—Ö),\n—Å–º–µ—Å—å –æ—Ä–µ—Ö–æ–≤ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥–∞–Ω–Ω—ã—Ö),\n–Ω–∞–±–æ—Ä—ã –æ—Ä–µ—Ö–æ–≤ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥–∞–Ω–Ω—ã—Ö).\n\n\n–í—Å–µ–º –£–¥–∞—á–∏ –≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∞!",
    "–ö–æ–ª–ª–µ–≥–∏, –≤–Ω–æ—Å–∏–º –≤—ã–ø–µ—á–∫—É –≤ –ø—Ä–∏–≤–æ–∑(–≤ –ª–∫)!",
    "–ö–æ–ª–ª–µ–≥–∏, –≤–Ω–æ—Å–∏–º —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–æ–≤ –∑–∞ 14:00 –≤ –ª–∫!",
    "–ö–æ–ª–ª–µ–≥–∏, –Ω–∞–ø–æ–Ω–∏–º–∞–Ω–∞—é –ø—Ä–æ –æ—Ç—á–µ—Ç!",
    "–ö–æ–ª–ª–µ–≥–∏, –Ω–∞—á–∏–Ω–∞–µ–º –≤–Ω–æ—Å–∏—Ç—å –æ—Å—Ç–∞—Ç–∫–∏!",
    "–ö–æ–ª–ª–µ–≥–∏, –Ω–∞—á–∏–Ω–∞–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Å—Ç–∞—Ç–∫–∏!",
    "–ö–æ–ª–ª–µ–≥–∏, –≤–Ω–æ—Å–∏–º —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–æ–≤ –∑–∞ –≤–µ—á–µ—Ä –≤ –ª–∫!",
    "–ö–æ–ª–ª–µ–≥–∏, –≤—ã–¥—ã—Ö–∞–µ–º, —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å –ø–æ—á—Ç–∏ –∑–∞–∫–æ–Ω—á–∏–ª—Å—è! –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –æ—Å—Ç–∞—Ç–∫–∏, –≤–Ω–æ—Å–∏–º —Ñ–∏–Ω–∞–Ω—Å—ã, —Å–¥–∞–µ–º –∏–Ω–∫–∞—Å—Å–∞—Ü–∏—é!",
    "–í—Å–µ–º —Ö–æ—Ä–æ—à–µ–≥–æ –≤–µ—á–µ—Ä–∞ –∏ –¥–æ–±—Ä–æ–π –Ω–æ—á–∏!",
    "–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"
]

# –í—Ä–µ–º–µ–Ω–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
times = [
    "05:00", "05:30", "07:30", "08:30", "09:00",
    "11:00", "12:30", "14:00", "15:30", "16:00",
    "17:00", "17:50", "18:40"
]

#–í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
for i in range(len(messages)):
    schedule.every().day.at(times[i]).do(send_message, messages[i])

# –ó–∞–ø—É—Å–∫–∞–µ–º –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
threading.Thread(target=run_scheduler, daemon=True).start()

bot.polling(none_stop=True)
